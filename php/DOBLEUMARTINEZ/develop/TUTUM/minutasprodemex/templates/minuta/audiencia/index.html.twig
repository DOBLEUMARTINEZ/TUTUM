{% extends 'layout/layoutBase.html.twig' %}

{% block tituloPagina %} 
	{{title}}
{% endblock %}

{% block contenido %}
	
	<hr class="hr-red">

	<div id="data-table-v1">

	<!-- JQUERY DRAG AND DROP -->
  		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
	        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

	 <!-- ALERTAS -->
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
	<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>


	<table id="mytable">

		<thead>
			<th colspan="4" style="border-bottom: 2px solid #000; width:100%;"> AUDIENCIA </th>
		</thead>

		<thead>
			<th style="width:20%; text-align:center;" >Posici√≥n</th>
			<th style="width:40%; text-align:center;" >Nombre</th>
			<th style="width:40%; text-align:center;" >Area</th>
		</thead>

		<tbody class="row_position">
			
			{% for  usuario in audiencia %}

				<tr id="{{ usuario.id }}" >
					<td style="text-align:center;" >{{ usuario.posicion }}</td>
					<td style="text-align:center;" >{{ usuario.idUsuario.nombre }} {{ usuario.idUsuario.apellido }}</td>
					<td style="text-align:center;" >{{ usuario.idUsuario.area }}</td>
				</tr>

			{% endfor %}

		</tbody>

	</table>

	<!-- javascript DRAG AND DROP -->
  	<script type="text/javascript">

	    $(document).ready(function(){
	    	$("#mytable").DataTable();
	    });

	    $(".row_position").sortable({
	    	delay:150,
	    	stop:function(){
	    		var selectedData = new Array();
	    		$(".row_position>tr").each(function(){
	    			selectedData.push($(this).attr("id"));
	    		});
	    		updateOrder(selectedData);
	    	}
	    });
	    function updateOrder(aData) {
        window.location.href = '../../updatepos?newpos='+aData+'&audi=true';
    }

	</script>

{% endblock %}




